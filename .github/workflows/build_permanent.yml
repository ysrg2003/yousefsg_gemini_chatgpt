name: ğŸš€ Build & Release Permanent Assets

on:
  workflow_dispatch: # ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª

permissions:
  contents: write # ØµÙ„Ø§Ø­ÙŠØ© Ø¶Ø±ÙˆØ±ÙŠØ© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù€ Release ÙˆØ±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª

jobs:
  build-engine:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“‚ Checkout Code
        uses: actions/checkout@v4

      - name: ğŸ Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: ğŸ› ï¸ Install System Build Dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y \
            build-essential \
            python3-dev \
            libcairo2-dev \
            libpango1.0-dev \
            pkg-config \
            libffi-dev \
            zip

      - name: ğŸ“¦ Run Setup Assets Script
        run: python setup_assets.py
        # Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ£ÙƒØ¯ Ø£Ù† Ù…Ù„Ù setup_assets.py Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ ÙˆÙŠÙ‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ vendor_assets.zip

      - name: ğŸš€ Create GitHub Release
        id: create_release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: v1.0.0
          name: "Gemini Engine Assets v1.0.0"
          body: |
            ØªØ­ØªÙˆÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù„Ù…Ø­Ø±Ùƒ Gemini:
            - Playwright Browsers (Chromium)
            - Camoufox & Dependencies
            - Python Libraries (Vendor Folder)
            ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ù€ Release ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ù€ Workflow Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ.
          draft: false
          prerelease: false
          files: vendor_assets.tar.zst
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: âœ… Status Check
        run: echo "ØªÙ… Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ±ÙØ¹Ù‡Ø§ Ø¥Ù„Ù‰ Release v1.0.0 Ø¨Ù†Ø¬Ø§Ø­!"
